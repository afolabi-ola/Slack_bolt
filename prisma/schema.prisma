datasource db {
    provider = "mongodb"
    url      = env("DATABASE_URL")
}

generator db {
    provider = "prisma-client-js"
}

model SlackInstallation {
    id             String  @id @default(auto()) @map("_id") @db.ObjectId()
    installation   String
    installationId String  @unique
    workspaceId    String  @unique @default("")
    connected      Boolean @default(false)
}

model Integration {
    id           String  @id @default(auto()) @map("_id") @db.ObjectId
    service      String  @unique
    status       Boolean
    workspaceId  String
    slackBotoken String? @default("")
}

model Workspace {
    id             String   @id @default(auto()) @map("_id") @db.ObjectId
    url            String?  @unique @default("")
    visibility     Boolean  @default(false)
    readAccess     String[] @default([])
    writeAccess    String[] @default([])
    totalMembers   Int
    name           String   @unique
    description    String?  @default("")
    RandR          String?  @default("")
    image          String?  @default("https://i.pinimg.com/736x/4e/38/e7/4e38e73208c8a9c2410e4f1d9cb90ee5.jpg")
    workspaceAdmin String[]
    owner          String   @db.ObjectId
    plan           String?  @default("free")
    members        String[] @default([])
    integrations   Json[]   @default([])
}

model Task {
    id          String  @id @default(auto()) @map("_id") @db.ObjectId
    status      Boolean
    workspaceId String
    messageId   String  @unique
    text        String
    integration String
}

model Message {
    id            String   @id @default(auto()) @map("_id") @db.ObjectId
    user          String
    userId        String
    text          String
    mediaType     String   @default("text")
    projectId     String
    mediaLinks    String[] @default([])
    channelId     String   @db.ObjectId
    timestamp     DateTime @default(now())
    reference     String   @default("")
    deletedForMe  Boolean  @default(false)
    deletedForAll Boolean  @default(false)
    threadId      String
    attachement   String[] @default([])
}
